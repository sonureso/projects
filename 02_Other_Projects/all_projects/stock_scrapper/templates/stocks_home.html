{% load static %}
<html>
<head>
	<script src="{% static 'my_js/jquery.js' %}"></script> 
<style>
table, th, td {
  border: 1px solid white;
  border-collapse: collapse;
  padding:4px;
}
.t_w{
	color:white;
	text-decoration:none;
}
.t_hover{
	color:white;
}
.t_hover:hover{
	color:#ff7a7f;
}
</style>
</head>

<body bgcolor="#000;">
<center class="t_w">
	<a href="/" class="t_w t_hover">Go to &Hfr;&ofr;&mfr;&efr;<a/> &ensp;|&ensp; 
	<a href="/stock_scrapper/" class="t_w t_hover" style="color:#ff7a7f;">Stock_Home<a/> 
	
</center>
<hr/>
</br>
<center>
	<div style="background-color:;height:auto;width:350px;">
		<form method="POST" action="/stock_scrapper/" id="get_data_form">
			{% csrf_token %}
			<span class="t_w" style="">Symbol:&nbsp; &ensp;</span>
			<select required id="symbol" name="symbol" style="background-color:black;width:170px;" class="t_w" >
				<option value="IRCTC">IRCTC</option>
				<option value="CDSL">CDSL</option>
				<option value="INFY">INFY</option>
				<option value="BPCL">BPCL</option>
			</select> 		</br></br>
			<span class="t_w" style="">TimeFrame&nbsp; &ensp;</span>
			<select required name="tf" style="background-color:black;width:170px;" class="t_w" >
				<option value="1D">1D</option>
			</select> 		</br></br>

			<span class="t_w" style="">Start Date:&nbsp; &ensp;</span> 
			<input type="date" id="st_date" name="st_date" required style="background-color:black;" class="t_w"> </br></br>
			<span class="t_w" style="">End Date:&nbsp; &ensp;</span> 
			<input type="date" id="end_date" name="end_date" required style="background-color:black;" class="t_w"> </br></br></br>

			<button class="t_w" style="background-color:black;cursor:pointer;" id="submit_button" type="submit" name="submit_button" value=" Get Data "> 
			Get Data </button> &emsp;
			<button class="t_w" type="button" onClick="$('#files_list_table').toggle();" style="background-color:black;cursor:pointer;blink"> See saved files</button> 
		</form>
			
	
	</div>
	{% if status == 'available' %}
		<button class="t_w" onClick="$('#info').toggle();" style="background-color:black;cursor:pointer;blink">API URL</button> &emsp;
		<button class="t_w" onClick="$('#data_table').toggle();" style="background-color:black;cursor:pointer;blink">See Data</button> &emsp;
		<button class="t_w" onClick="$('#submit_button').val('save data');$('#submit_button').click();" style="background-color:black;cursor:pointer;">Save as CSV</button> &emsp;
		<span class="t_w"> 
			<script> 
				
				document.getElementById("end_date").value = "{{end_date}}";
				document.getElementById("st_date").value = "{{st_date}}"; 
				document.getElementById("symbol").value = "{{symbol}}"; 
			</script> 
		</span>
	{% endif %}
	<br/>
	<div style="background-color:;height:auto;" hidden id="info">
		<br/>
		<center>
		<span style="color:#ff7a7f;">â€¢ URL: </span>
		<span class="t_w">
			{% if url %}
				{{url}}
			{% else %}
				N/A
			{% endif %}
		</span>
		</center>
	</div>
	<table class="t_w" style="width:550px; padding:5px;" hidden id="files_list_table">
		
		<tr>
			<th> Symbol </th>
			<th> Freq </th>
			<!-- <th> st_date </th>
			<th> end_date </th> -->
			<th> filename </th>
		</tr>
		{% for file in files_list %}
		<tr style="color:white;" class="itemrow">
			<td>{{file.symbol}}</td> &ensp;
			<td>{{file.tf}}</td> &ensp;
			<!-- <td>{{file.st_date}}</td> &ensp; -->
			<!-- <td>{{file.end_date}}</td> &ensp; -->
			<td style="font-size:12px;">{{file.name}}</td> &ensp;
		</tr>
		{% endfor %}
	</table>
	
	<table class="t_w" style="width:550px; padding:5px;" hidden id="data_table">
		
		<tr>
			<th> Date </th>
			<th> Time </th>
			<th> Open </th>
			<th> Close </th>
			<th> High </th>
			<th> Low </th>
			<th> Volume </th>
		</tr>
		{% for data in st_data %}
		<tr style="color:white;" class="itemrow">
			<td>{{data.day}}-{{data.month}}-{{data.year}}</td> &ensp;
			<td>{{data.time}}</td> &ensp;
			<td>{{data.open}}</td> &ensp;
			<td>{{data.close}}</td> &ensp;
			<td>{{data.high}}</td> &ensp;
			<td>{{data.low}}</td> &ensp;
			<td>{{data.volume}}</td>
		</tr>
		{% endfor %}
	</table>


	
</center>
</br>
</body>
</html>